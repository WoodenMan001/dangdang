function objtostring(t){var a=[];for(var e in t)a.push(e+"="+t[e]);return a.join("&")}function ajax(t){return new Promise(function(a,e){t.type=t.type||"get",t.data=t.data||"";var r=new XMLHttpRequest;if(""==t.url)throw new Error("接口地址不能为空");if("object"!=typeof t.data||Array.isArray(t.data)){if("string"!=typeof t.data)throw new Error("数据格式有误");t.data=t.data}else t.data=objtostring(t.data);0==t.async?t.async=!1:t.async=!0,"get"==t.type&&t.data&&(t.url+="?"+t.data),r.open(t.type,t.url,t.async),"post"==t.type?(r.setRequestHeader("content-type","application/x-www-form-urlencoded"),r.send(t.data)):r.send(),0==t.async?200==r.status?t.success&&t.success(r.responseText):t.error&&t.error("接口地址错误："+r.status):r.onreadystatechange=function(){4==r.readyState&&(200==r.status?a(r.responseText):e("接口地址错误："+r.status))}})}